{"version":3,"sources":["webpack:///./src/assets/image/logo.png","webpack:///./src/assets/image/setting/dark.svg","webpack:///./src/assets/image/setting/horizontal.svg","webpack:///./src/assets/image/setting/inline.svg","webpack:///./src/assets/image/setting/light.svg","webpack:///./src/assets/image/setting/split.svg","webpack:///./src/assets/image/setting/vertical.svg","webpack:///./src/layout/MainLayout.tsx","webpack:///./src/utils/authorityTools.ts"],"names":["Exception403","React","lazy","inject","observer","props","location","useLocation","children","route","layoutStore","layoutStatus","collapsed","isMobile","showMenu","showHeader","fixSiderBar","fixHeader","toggleCollapsed","loadingOptions","isContentFlowMode","isInlineLayout","isHorizontalNavigator","isDarkTheme","routeAuthority","getRouteAuthority","pathname","routes","RANavigator","useMemo","ViewMain","unidentified","fallback","spinning","className","splitModeLayout","id","classNames","propStyle","marginBottom","IconCollapsed","inlineModeLayout","onClick","alignSelf","HorizontalMenuLayout","marginTop","VerticalMenuLayout","to","getAuthority","str","authority","authorityString","localStorage","getItem","JSON","parse","e","setAuthority","proAuthority","setItem","stringify","clearAuthority","removeItem","_getAuthority","_routes","forEach","_route","path"],"mappings":"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","file":"static/js/src-layout-MainLayout.03d1cc4b.chunk.js","sourcesContent":["export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/img/dark.51a66c49.svg\";","export default __webpack_public_path__ + \"static/img/horizontal.f80ad184.svg\";","export default __webpack_public_path__ + \"static/img/inline.4b04fff4.svg\";","export default __webpack_public_path__ + \"static/img/light.ccbb6cbd.svg\";","export default __webpack_public_path__ + \"static/img/split.5d82973f.svg\";","export default __webpack_public_path__ + \"static/img/vertical.d0efa020.svg\";","import React, { Suspense, useMemo } from 'react';\nimport Loading from '@components/Loading';\nimport Authorized from '@components/Authorized';\nimport { Header, Navigator } from '@components/Layout';\nimport { Redirect, useLocation } from 'react-router-dom';\nimport { getRouteAuthority } from '@utils/authorityTools';\nimport classNames from 'classnames';\nimport Footer from '@components/Footer';\nimport { observer, inject } from 'mobx-react';\nimport LayoutStore from '@store/layoutStore';\nimport { RouteConfig } from '@/models/layout';\nimport LayoutSetting from '@components/LayoutSetting';\nimport { MenuUnfoldOutlined, MenuFoldOutlined } from '@ant-design/icons';\nimport './mainLayout.less';\n\nconst Exception403 = React.lazy(() => import(/* webpackChunkName: \"403\" */ '@views/Exception/403'));\n\ninterface MainLayoutProps {\n  route: RouteConfig;\n}\n\ninterface MainLayoutInjected extends MainLayoutProps {\n  layoutStore: LayoutStore;\n}\n\nconst MainLayout: React.FC<MainLayoutProps> = props => {\n  let location = useLocation();\n  const injected = () => {\n    return props as MainLayoutInjected;\n  };\n  const { children, route } = props;\n  const {\n    layoutStore: {\n      layoutStatus: { collapsed, isMobile, showMenu, showHeader, fixSiderBar, fixHeader },\n      toggleCollapsed,\n      loadingOptions,\n      isContentFlowMode,\n      isInlineLayout,\n      isHorizontalNavigator,\n      isDarkTheme\n    }\n  } = injected();\n  const routeAuthority: undefined | string | string[] = getRouteAuthority(\n    location.pathname,\n    route.routes\n  );\n\n  const RANavigator = useMemo(\n    () => <Navigator collapsed={collapsed} isMobile={isMobile} toggleCollapsed={toggleCollapsed} />,\n    [collapsed, isMobile, toggleCollapsed]\n  );\n\n  const ViewMain = (\n    <Authorized\n      routeAuthority={routeAuthority}\n      unidentified={\n        <Suspense fallback={<Loading spinning />}>\n          <Exception403 />\n        </Suspense>\n      }\n    >\n      <main className=\"RA-basicLayout-wrapper-viewMain\">{children}</main>\n    </Authorized>\n  );\n\n  // 分割模式，菜单切割header\n  const splitModeLayout = (\n    <>\n      {showMenu && RANavigator}\n      <div\n        id=\"mainContainer\"\n        className={classNames(\n          'RA-basicLayout-wrapper',\n          collapsed && 'RA-basicLayout-wrapper-collapsed'\n        )}\n      >\n        {showHeader && <Header />}\n        <div className=\"RA-basicLayout-wrapper-content\">\n          {ViewMain}\n          <Footer propStyle={{ marginBottom: '16px' }} />\n        </div>\n      </div>\n    </>\n  );\n\n  const IconCollapsed = collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />;\n\n  // 一体布局模式，菜单不分割header\n  const inlineModeLayout = (\n    <>\n      {showHeader && <Header />}\n      <div\n        id=\"mainContainer\"\n        className={classNames(\n          'RA-basicLayout-wrapper',\n          collapsed && 'RA-basicLayout-wrapper-collapsed'\n        )}\n      >\n        {showMenu && RANavigator}\n        {ViewMain}\n      </div>\n      <div\n        className={classNames(\n          'RA-basicLayout-inlineMode-footer',\n          isDarkTheme && 'RA-basicLayout-inlineMode-footer-dark'\n        )}\n      >\n        {showMenu && (\n          <div\n            className={classNames(\n              'RA-basicLayout-inlineMode-footer-icon',\n              collapsed && 'RA-basicLayout-inlineMode-footer-collapsed'\n            )}\n            onClick={() => toggleCollapsed()}\n          >\n            {IconCollapsed}\n          </div>\n        )}\n        <Footer propStyle={{ alignSelf: 'flex-end' }} />\n      </div>\n    </>\n  );\n\n  // 顶部导航栏模式\n  const HorizontalMenuLayout = (\n    <div\n      id=\"mainContainer\"\n      className={classNames(\n        'RA-basicLayout-horizontal',\n        !showHeader && 'RA-basicLayout-horizontal-hideHeader',\n        isContentFlowMode && 'RA-basicLayout-horizontal-contentFlow',\n        fixHeader && 'RA-basicLayout-horizontal-fixHeader'\n      )}\n    >\n      {showHeader && <Header />}\n      <div className=\"RA-basicLayout-horizontal-wrapper\">\n        {ViewMain}\n        <Footer propStyle={{ marginTop: '16px' }} />\n      </div>\n      <Loading {...loadingOptions} />\n    </div>\n  );\n\n  // 左侧导航栏模式\n  const VerticalMenuLayout = (\n    <div\n      className={classNames(\n        'RA-basicLayout',\n        isInlineLayout ? 'RA-basicLayout-inlineMode' : 'RA-basicLayout-splitMode',\n        !showMenu && 'RA-basicLayout-hideMenu',\n        !showHeader && 'RA-basicLayout-hideHeader',\n        fixHeader && 'RA-basicLayout-fixHeader',\n        fixSiderBar && 'RA-basicLayout-fixSiderBar'\n      )}\n    >\n      <Loading {...loadingOptions} collapsed={collapsed} />\n      {isInlineLayout ? inlineModeLayout : splitModeLayout}\n    </div>\n  );\n\n  return (\n    <Authorized unidentified={<Redirect to=\"/user/login\" />}>\n      <>\n        {isHorizontalNavigator ? HorizontalMenuLayout : VerticalMenuLayout}\n        {!isMobile && <LayoutSetting />}\n      </>\n    </Authorized>\n  );\n};\n\nexport default inject('layoutStore')(observer(MainLayout));\n","import { RouteConfig } from '@models/layout';\n/**\n * 获取权限\n * @param {str} string 未处理的权限\n * @return {authority} {Array<string>} 权限结果\n */\nexport function getAuthority(str?: string | string[]) {\n  const authorityString = typeof str === 'undefined' ? localStorage.getItem('RA-authority') : str;\n  let authority;\n  try {\n    // @ts-ignore\n    authority = JSON.parse(authorityString);\n  } catch (e) {\n    authority = authorityString;\n  }\n  if (typeof authority === 'string') {\n    return [authority];\n  }\n  return authority;\n}\n\n/**\n * 设置权限\n * @param {authority} string|array 权限\n */\nexport function setAuthority(authority: string | string[]) {\n  const proAuthority = typeof authority === 'string' ? [authority] : authority;\n  localStorage.setItem('RA-authority', JSON.stringify(proAuthority));\n}\n\n// 清除权限\nexport function clearAuthority() {\n  localStorage.removeItem('RA-authority');\n}\n\n/**\n * 获取路由权限\n * @param {pathname} string 路由路径\n * @return {routeAuthority} {string} 路由对应权限\n */\nexport function getRouteAuthority(pathname: string, routes: RouteConfig[] = []) {\n  let routeAuthority: undefined | string | string[];\n  const _getAuthority = (pathname: string, _routes: RouteConfig[]) => {\n    _routes.forEach(_route => {\n      if (pathname === _route.path) {\n        routeAuthority = _route.authority;\n      } else if (_route.routes) {\n        routeAuthority = _getAuthority(pathname, _route.routes);\n      }\n    });\n    return routeAuthority;\n  };\n  return _getAuthority(pathname, routes);\n}\n"],"sourceRoot":""}