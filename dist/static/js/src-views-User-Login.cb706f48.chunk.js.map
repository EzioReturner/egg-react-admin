{"version":3,"sources":["webpack:///./src/views/User/Login.tsx","webpack:///./src/views/User/LoginForm.tsx"],"names":["Login","useState","apError","setApError","shake","setShake","className","onAnimationEnd","message","type","showIcon","style","marginBottom","handleError","inject","props","loading","setLoading","history","useHistory","propsHandleError","userStore","siteName","Fragment","name","initialValues","remember","onFinish","values","username","password","Promise","handleUserLogin","then","res","success","setTimeout","push","Item","rules","required","prefix","placeholder","valuePropName","noStyle","href","id","htmlType"],"mappings":"63BAgCeA,UA1BS,WAAO,IAAD,IACEC,oBAAS,GADX,GACrBC,EADqB,KACZC,EADY,SAEFF,oBAAS,GAFP,GAErBG,EAFqB,KAEdC,EAFc,KAS5B,OACE,yBAAKC,UAAU,SACZJ,GACC,yBAAKI,UAAWF,EAAQ,iBAAmB,GAAIG,eAAgB,kBAAMF,GAAS,KAC5E,uBACEG,QAAQ,+DACRC,KAAK,QACLC,UAAQ,EACRC,MAAO,CAAEC,aAAc,WAI7B,kBAAC,UAAD,CAAWC,YAjBK,WAClBR,GAAS,GACTF,GAAW,S,q7CCoGAW,sBAAO,YAAPA,EA/F6B,SAAAC,GAAU,IAAD,IACrBd,oBAAS,GADY,GAC5Ce,EAD4C,KACnCC,EADmC,KAE7CC,EAAUC,cAFmC,EAGEJ,EAAhCK,EAH8B,EAG3CP,YAA+BQ,EAHY,EAGZA,UA4BvC,OACE,kBAAC,WAAD,KACE,yBAAKf,UAAU,cACC,aAAbgB,WACC,kBAAC,IAAMC,SAAP,SACG,mCADH,UAIAD,YAGJ,uBACEE,KAAK,eACLlB,UAAU,aACVmB,cAAe,CAAEC,UAAU,GAC3BC,SAhCe,SAACC,GACpBX,GAAW,GADmC,IAEtCY,EAAuBD,EAAvBC,SAAUC,EAAaF,EAAbE,SAClB,OAAO,IAAIC,SAAQ,WACjBV,EAAUW,gBAAgBH,EAAUC,GAAUG,MAAK,SAAAC,GAC7CA,GACF,IAAQC,QAAQ,iBAChBC,YAAW,WAVjBlB,EAAQmB,KAAK,gBAYJ,OAjBTpB,GAAW,GACXG,aAyCI,sBAAMkB,KAAN,CACEd,KAAK,WACLe,MAAO,CAAC,CAAEC,UAAU,EAAMhC,QAAS,iCAEnC,uBACEiC,OAAQ,kBAAC,IAAD,CAAcnC,UAAU,wBAChCoC,YAAY,6BAGhB,sBAAMJ,KAAN,CACEd,KAAK,WACLe,MAAO,CAAC,CAAEC,UAAU,EAAMhC,QAAS,iCAEnC,uBACEiC,OAAQ,kBAAC,IAAD,CAAcnC,UAAU,wBAChCG,KAAK,WACLiC,YAAY,mBAGhB,sBAAMJ,KAAN,KACE,sBAAMA,KAAN,CAAWd,KAAK,WAAWmB,cAAc,UAAUC,SAAO,GACxD,2CAGF,uBAAGtC,UAAU,oBAAoBuC,KAAK,IAAtC,oBAKF,sBAAMP,KAAN,KACE,uBACEQ,GAAG,eACHrC,KAAK,UACLsC,SAAS,SACTzC,UAAU,oBACVU,QAASA,GALX,UASA,sCACA,uBAAG6B,KAAK,IAAR,wB","file":"static/js/src-views-User-Login.cb706f48.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { Alert } from 'antd';\nimport LoginForm from './LoginForm';\nimport './login.less';\nimport 'animate.css';\n\nconst Login: React.FC = () => {\n  const [apError, setApError] = useState(false);\n  const [shake, setShake] = useState(false);\n\n  const handleError = () => {\n    setShake(true);\n    setApError(true);\n  };\n\n  return (\n    <div className=\"login\">\n      {apError && (\n        <div className={shake ? 'animated shake' : ''} onAnimationEnd={() => setShake(false)}>\n          <Alert\n            message=\"账户或者密码错误 a:ra  p:123\"\n            type=\"error\"\n            showIcon\n            style={{ marginBottom: '16px' }}\n          />\n        </div>\n      )}\n      <LoginForm handleError={handleError} />\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { Fragment, useState } from 'react';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { Button, Input, Checkbox, message, Form } from 'antd';\nimport { siteName } from '@config/setting';\nimport UserStore from '@store/userStore';\nimport { inject } from 'mobx-react';\nimport { useHistory } from 'react-router-dom';\nimport './login.less';\nimport 'animate.css';\n\ninterface LoginFormProps {\n  handleError: Function;\n}\ninterface InjectedProps extends LoginFormProps {\n  userStore: UserStore;\n}\n\nconst LoginForm: React.FC<LoginFormProps> = props => {\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const { handleError: propsHandleError, userStore } = props as InjectedProps;\n\n  const handleError = () => {\n    setLoading(false);\n    propsHandleError();\n  };\n\n  const handleSuccess = () => {\n    history.push('/dashboard');\n  };\n\n  const handleSubmit = (values: StoreKeyValue) => {\n    setLoading(true);\n    const { username, password } = values;\n    return new Promise(() => {\n      userStore.handleUserLogin(username, password).then(res => {\n        if (res) {\n          message.success('login success');\n          setTimeout(() => {\n            handleSuccess();\n          }, 800);\n        } else {\n          handleError();\n        }\n      });\n    });\n  };\n\n  return (\n    <Fragment>\n      <div className=\"loginTitle\">\n        {siteName === 'RA-Turbo' ? (\n          <React.Fragment>\n            R<span>A</span>-TORBO\n          </React.Fragment>\n        ) : (\n          siteName\n        )}\n      </div>\n      <Form\n        name=\"normal_login\"\n        className=\"login-form\"\n        initialValues={{ remember: true }}\n        onFinish={handleSubmit}\n      >\n        <Form.Item\n          name=\"username\"\n          rules={[{ required: true, message: 'Please input your Username!' }]}\n        >\n          <Input\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Username: admin | guest\"\n          />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          rules={[{ required: true, message: 'Please input your Password!' }]}\n        >\n          <Input\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n            type=\"password\"\n            placeholder=\"Password: 123\"\n          />\n        </Form.Item>\n        <Form.Item>\n          <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\n            <Checkbox>Remember me</Checkbox>\n          </Form.Item>\n\n          <a className=\"login-form-forgot\" href=\"\">\n            Forgot password\n          </a>\n        </Form.Item>\n\n        <Form.Item>\n          <Button\n            id=\"login_button\"\n            type=\"primary\"\n            htmlType=\"submit\"\n            className=\"login-form-button\"\n            loading={loading}\n          >\n            Log in\n          </Button>\n          <span> Or </span>\n          <a href=\"\">register now!</a>\n        </Form.Item>\n      </Form>\n    </Fragment>\n  );\n};\n\nexport default inject('userStore')(LoginForm);\n"],"sourceRoot":""}